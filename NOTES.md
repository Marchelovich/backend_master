Too many thing I would like to improve in this code. First thing would be adding class autoloader.
